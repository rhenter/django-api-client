<!DOCTYPE html>




<html lang="pt_BR">
  <head>
    <meta charset="utf-8" />
    
    <title>Exemplo &mdash; documentação Django API Client 0.7.0</title>
    <meta name="description" content="">
    <meta name="author" content="">

    

<link rel="stylesheet" href="_static/css/basicstrap-base.css" type="text/css" />
<link rel="stylesheet" id="current-theme" href="_static/css/bootstrap3/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" id="current-adjust-theme" type="text/css" />

<link rel="stylesheet" href="_static/css/font-awesome.min.css">

<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
</style>

<link rel="stylesheet" href="_static/css/basicstrap.css" type="text/css" />
<link rel="stylesheet" href="_static/pygments.css" type="text/css" />
<link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    './',
            VERSION:     '0.7.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
  };
</script>
    <script type="text/javascript" src="_static/js/jquery.min.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="_static/js/bootstrap3.min.js"></script>
<script type="text/javascript" src="_static/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="_static/js/basicstrap.js"></script>
<script type="text/javascript">
</script>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Buscar" href="search.html" />
    <link rel="top" title="documentação Django API Client 0.7.0" href="index.html" /> 
  </head>
  <body role="document">
    <div id="navbar-top" class="navbar navbar-fixed-top navbar-default" role="navigation" aria-label="top navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">documentação Django API Client 0.7.0</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">

            
              <li><a href="genindex.html" title="Índice Geral" accesskey="I">índice </a></li>
            
            <li class="visible-xs"><a href="_sources/example.rst.txt" rel="nofollow">Exibir Fonte</a></li>

            <li class="visible-xs">
                <form class="search form-search form-inline navbar-form navbar-right sp-searchbox" action="search.html" method="get">
                  <div class="input-append input-group">
                    <input type="text" class="search-query form-control" name="q" placeholder="Search...">
                    <span class="input-group-btn">
                    <input type="submit" class="btn" value="Ir" />
                    </span>
                  </div>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </li>

            

          </ul>

        </div>
      </div>
    </div>
    

    <!-- container -->
    <div class="container-fluid">

      <!-- row -->
      <div class="row">
         
<div class="col-md-3 hidden-xs" id="sidebar-wrapper">
  <div class="sidebar hidden-xs" role="navigation" aria-label="main navigation">
  <div role="note" aria-label="source link">
    <h3>Essa Página</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/example.rst.txt"
            rel="nofollow">Exibir Fonte</a></li>
    </ul>
   </div>
<div id="searchbox" role="search">
  <h3>Busca rápida</h3>
  <form class="search form-inline" action="search.html" method="get">
      <div class="input-append input-group">
        <input type="text" class="search-query form-control" name="q" placeholder="Search...">
        <span class="input-group-btn">
        <input type="submit" class="btn" value="Ir" />
        </span>
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div> 
        

        <div class="col-md-9" id="content-wrapper">
          <div class="document" role="main">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <div class="section" id="example">
<h1>Exemplo<a class="headerlink" href="#example" title="Link permanente para este título">¶</a></h1>
<ul class="simple">
<li><p>Adicione esta configuração no seu projeto no arquivo <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> para acessar a sua API</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DJANGO_API_CLIENT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;API&#39;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
          <span class="s1">&#39;BASE_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://example.com/v1&#39;</span><span class="p">,</span>
          <span class="s1">&#39;ENDPOINTS&#39;</span><span class="p">:</span> <span class="p">[</span>
              <span class="s1">&#39;/order/orders&#39;</span><span class="p">,</span>
              <span class="s1">&#39;/user/users&#39;</span><span class="p">,</span>
              <span class="o">...</span>
          <span class="p">],</span>
          <span class="s1">&#39;AUTHENTICATION_ACCESS_TOKEN&#39;</span><span class="p">:</span> <span class="s1">&#39;TOKEN&#39;</span>
      <span class="p">},</span>
      <span class="p">{</span>
          <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
          <span class="s1">&#39;BASE_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8001/v1&#39;</span><span class="p">,</span>
          <span class="s1">&#39;ENDPOINTS&#39;</span><span class="p">:</span> <span class="p">[</span>
              <span class="s1">&#39;/order/orders&#39;</span><span class="p">,</span>
              <span class="s1">&#39;/user/users&#39;</span><span class="p">,</span>
              <span class="o">...</span>
          <span class="p">],</span>
          <span class="s1">&#39;AUTHENTICATION_ACCESS_TOKEN&#39;</span><span class="p">:</span> <span class="s1">&#39;TOKEN&#39;</span>
      <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Dica</p>
<p>Os detalhes da configuração serão melhor explicados na documentação</p>
</div>
<ul class="simple">
<li><p>Crie um arquivo clients.py em alguma pasta nucleo do seu projeto, caso não tenha, crie dentro da sua pasta do projeto para ficar mais simples de ser importado de qualquer lugar do projeto com o seguinte conteúdo:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django_api_client.client</span> <span class="kn">import</span> <span class="n">api_client_factory</span>

<span class="n">api_client</span> <span class="o">=</span> <span class="n">api_client_factory</span><span class="p">(</span><span class="s1">&#39;production&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Dica</p>
<ul class="simple">
<li><p>O nome dessa variável será o nome do cliente que será importado para cada projeto</p></li>
<li><p>É recomendável que o nome venha de uma constante no arquivo settings.py, e se possível ser até uma variável de ambiente</p></li>
<li><p>No nosso caso, temos 2 opções, “produção” e “localhost”, a fábrica gera um <cite>api client</cite> de acordo com o nome usado e os parâmetros identificados nele</p></li>
</ul>
</div>
<ul class="simple">
<li><p>Agora vamos listar os dados usando o sistema padrão do Django</p></li>
</ul>
<p>Vamos imaginar que o cliente esta em uma pasta dentro da pasta do projeto (pasta que contém o arquivo settings.py)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django_api_client.mixins</span> <span class="kn">import</span> <span class="n">ClientAPIListMixin</span>

<span class="kn">from</span> <span class="nn">pasta_do_projeto.clients</span> <span class="kn">import</span> <span class="n">api_client</span>


<span class="k">class</span> <span class="nc">OrderListView</span><span class="p">(</span><span class="n">ClientAPIListMixin</span><span class="p">):</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;template_name.html&quot;</span>        <span class="c1"># Path where is your template</span>
    <span class="n">page_title</span> <span class="o">=</span> <span class="s1">&#39;Orders&#39;</span>                       <span class="c1"># Generates a context variable to use in your template</span>
    <span class="n">page_base_url</span> <span class="o">=</span> <span class="n">reverse_lazy</span><span class="p">(</span><span class="s1">&#39;order:list&#39;</span><span class="p">)</span>  <span class="c1"># Information used in pagination, and the search</span>
    <span class="n">paginate_by</span> <span class="o">=</span> <span class="mi">50</span>                            <span class="c1"># Number of items to generate the pagination</span>
    <span class="n">client_method</span> <span class="o">=</span> <span class="n">api_client</span><span class="o">.</span><span class="n">order</span><span class="o">.</span><span class="n">orders</span><span class="o">.</span><span class="n">list</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>O cliente irá gerar uma estrutura amigavel para cada endpoing. Exemplo com o endpoint <em>/order/orders/</em>:</p>
</div>
<p>No seu template você pode usar os snippets de formulários e de paginação. Ex:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">content</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">...</span>
<span class="x">&lt;div class=&quot;card card-navy card-outline&quot;&gt;</span>
<span class="x">  &lt;div class=&quot;card-header&quot;&gt;</span>
<span class="x">    &lt;h3 class=&quot;card-title&quot;&gt;</span>
<span class="x">      </span><span class="cp">{%</span> <span class="k">trans</span> <span class="s2">&quot;Order List&quot;</span> <span class="cp">%}</span><span class="x"> : &lt;small class=&quot;text-muted&quot;&gt;</span><span class="cp">{{</span> <span class="nv">paginator.count</span> <span class="cp">}}</span><span class="x">&lt;/small&gt;</span>
<span class="x">    &lt;/h3&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;includes/form_paginate_by.html&quot;</span> <span class="k">with</span> <span class="nv">paginate_by</span><span class="o">=</span><span class="nv">paginate_by</span> <span class="nv">range_pagination</span><span class="o">=</span><span class="nv">range_pagination</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;includes/form_search.html&quot;</span> <span class="k">with</span> <span class="nv">search</span><span class="o">=</span><span class="nv">search</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  &lt;/div&gt;</span>
<span class="x">  &lt;div class=&quot;card-body table-responsive p-0&quot;&gt;</span>
<span class="x">    &lt;table class=&quot;table table-bordered table-hover table-striped&quot; id=&quot;list-content&quot;&gt;</span>
<span class="x">      &lt;thead&gt;</span>
<span class="x">      &lt;tr&gt;</span>
<span class="x">        &lt;th&gt;</span><span class="cp">{%</span> <span class="k">trans</span> <span class="s1">&#39;Code&#39;</span> <span class="cp">%}</span><span class="x">&lt;/th&gt;</span>
<span class="x">        &lt;th&gt;</span><span class="cp">{%</span> <span class="k">trans</span> <span class="s1">&#39;Customer&#39;</span> <span class="cp">%}</span><span class="x">&lt;/th&gt;</span>
<span class="x">        &lt;th&gt;</span><span class="cp">{%</span> <span class="k">trans</span> <span class="s1">&#39;Product&#39;</span> <span class="cp">%}</span><span class="x">&lt;/th&gt;</span>
<span class="x">      &lt;/tr&gt;</span>
<span class="x">      &lt;/thead&gt;</span>
<span class="x">      &lt;tbody class=&quot;text-gray&quot;&gt;</span>
<span class="x">      </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">order</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;tr&gt;</span>
<span class="x">          &lt;td&gt;&lt;a href=&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;order:detail&#39;</span> <span class="nv">pk</span><span class="o">=</span><span class="nv">order.id</span> <span class="cp">%}</span><span class="x">&quot; &lt;/a&gt;</span>
<span class="x">          &lt;/td&gt;</span>
<span class="x">          &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">order.id</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">          &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">order.customer.name</span><span class="o">|</span><span class="nf">title</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">          &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">order.product.name</span><span class="o">|</span><span class="nf">title</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">        &lt;/tr&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">      </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">      &lt;/tbody&gt;</span>
<span class="x">    &lt;/table&gt;</span>
<span class="x">  &lt;/div&gt;</span>
<span class="x">  &lt;div class=&quot;card-footer&quot;&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">object_list</span><span class="o">|</span><span class="nf">length</span> <span class="o">!=</span> <span class="m">0</span> <span class="k">or</span> <span class="k">not</span> <span class="nv">object_list</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">      </span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;includes/list_paginator.html&quot;</span> <span class="k">with</span> <span class="nv">page_obj</span><span class="o">=</span><span class="nv">page_obj</span> <span class="nv">paginator</span><span class="o">=</span><span class="nv">paginator</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  &lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<ul class="simple">
<li><p>Exemplo usando estilos (CSS) do Bootstrap</p></li>
<li><p>includes/form_search.html: Formulário com input de busca. Este <code class="docutils literal notranslate"><span class="pre">include</span></code> suporta placeholder tambem.</p></li>
<li><p>includes/form_paginate_by.html: Formulario de Select para escolher com quantos elementos a pagina será paginadaEx: por (20, 40, 60, etc …)</p></li>
<li><p>includes/list_paginator.html: Bloco com os elementos de paginação com os butões de número de paginas, anterior e proximo</p></li>
</ul>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>endpoint name: order
methods:
     - list   # GET: List
     - get    # GET: Detail of a resource using an identifier
     - create # POST: Create a resource record
     - update # PUT / PATCH: Fully or partially updates a resource using an identifier
     - delete # DELETE: delete a record in a resource using an identifier
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Dica</p>
<dl class="simple">
<dt>O que isso quer dizer?</dt><dd><p>Que o API Cliente sempre gerará a estutura de acordo os nomes dos seus endpoints</p>
</dd>
</dl>
</div>
</div>


                </div>
              </div>
            </div>
          </div>
        </div>
        
        
      </div><!-- /row -->

      <!-- row -->
      <div class="row footer-relbar">
<div id="navbar-related" class=" related navbar navbar-default" role="navigation" aria-label="related navigation">
  <div class="navbar-inner">
    <ul class="nav navbar-nav ">
        <li><a href="index.html">documentação Django API Client 0.7.0</a></li>
    </ul>
<ul class="nav navbar-nav pull-right hidden-xs hidden-sm">
      
        <li><a href="genindex.html" title="Índice Geral" >índice</a></li>
        <li><a href="#">top</a></li> 
      
    </ul>
  </div>
</div>
      </div><!-- /row -->

      <!-- footer -->
      <footer role="contentinfo">
          &copy; Copyright 2020, Rafael Henter.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.1.2.
      </footer>
      <!-- /footer -->

    </div>
    <!-- /container -->

  </body>
</html>